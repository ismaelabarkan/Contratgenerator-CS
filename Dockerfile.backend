FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy application files
COPY server.js ./
COPY backend/ ./backend/
COPY utils/ ./utils/
COPY standalone_contract_generator_v3_flow.html ./public/index.html
COPY clausules/ ./clausules/
COPY flows/ ./flows/
COPY beheer/ ./public/beheer/

# Create public directory for static files
RUN mkdir -p public

# Expose port 3001
EXPOSE 3001

# Start the server
CMD ["npm", "start"]
